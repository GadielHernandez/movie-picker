---
import ModalAuthButton from "./ModalAuthButton"
import Button from "./core/Button"
import type { IProfile } from "../models/profile/profile.interfaces"

interface Props {
    user: IProfile | null
}

const { user }: Props = Astro.props
---
<nav class="fixed flex h-16 py-3 justify-between items-center px-6 md:px-12 lg:px-44 top-0 left-0 w-full z-50 border-b border-black">
    <div>
        <a href="/">
            <img src="/img/full_icon.png" alt="Logo Movie Picker" class="h-8"/>
        </a>
    </div>
    <div class="flex items-center gap-3">
        <a href="/movies" class="text-white px-2 py-1 text-xs font-bold uppercase hover:text-amber-500">
            Mis elecciones
        </a>
        <a href="/movies" class="text-white px-2 py-1 text-xs font-bold uppercase hover:text-amber-500">
            Grupos
        </a>
        { 
            user 
            ? <Button
                outline
                small
                href="/api/auth/signout"
                >  
                    <span class="uppercase">Cerrar sesi√≤n</span>
                </Button>
            : <ModalAuthButton client:idle/>
        }
    </div>
</nav>

<script>
    const scrollHander = () => {
        const nav = document.querySelector('nav')
        if (window.scrollY > 100) {
            nav?.classList.add('bg-neutral-900')
            nav?.classList.add('shadow-lg')
            nav?.classList.add('shadow-black')
        } else {
            nav?.classList.remove('bg-neutral-900')
            nav?.classList.remove('shadow-lg')
            nav?.classList.add('shadow-black')
        }
    }
    window.addEventListener('scroll', scrollHander)
</script>